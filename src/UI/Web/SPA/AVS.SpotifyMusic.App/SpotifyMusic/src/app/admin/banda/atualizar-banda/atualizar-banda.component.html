<mat-card>
  <mat-card class="d-flex align-items-center p-2">
    <div class="row col-md-12 text-center d-flex align-items-center p-2">
    <div class="col">
        <img [src]="fotoURL"
        alt="Banda"
        (click)="file.click()"
        class="rounded-circle"
        style="width: 200px; height: 150px" />
    </div>
  </div>
  </mat-card>
  <div class="alert p-0" style="background-color: rgb(28, 125, 86);">
    <div class="d-flex justify-content-center">
      <h1 class="fs-4 fw-bold" mat-dialog-title>{{data.title}}</h1>
    </div>
  </div>
  <mat-card-content>
    <form [formGroup]="bandaform" (ngSubmit)="data.title.includes('Adicionar') ? CriarBanda() : AtualizarBanda()">
      <div mat-dialog-content>
        <div class="row" style="display: none">
          <div class="example-full-width d-flex align-items-center justify-content-center">
            <div class="col-lg-6">
              @if (progress) {
              <mat-toolbar class="progress-bar">
                <mat-progress-bar color="accent" [value]="progress"></mat-progress-bar>
                <span class="progress">{{ progress }}%</span>
              </mat-toolbar>
              }

              <mat-form-field>
                <div>
                  <mat-toolbar>
                    <input matInput [value]="fileName" />

                    <button
                      mat-flat-button
                      color="primary"
                      [disabled]="!currentFile"
                      (click)="UploadImage()"
                    >
                      Upload
                    </button>
                  </mat-toolbar>

                  <input
                    type="file"
                    id="fileInput"
                    #file
                    [disabled]="data.title.includes('Adicionar')"
                    (change)="OnFileChange($event)"
                    name="fileInput"
                  />
                </div>
              </mat-form-field>
            </div>
            <!-- @if (message) {
            <div class="message">
              {{ message }}
            </div>
            } -->

            <!-- <mat-card class="example-card">
              <mat-card-header>
                <mat-card-title>List of Files</mat-card-title>
              </mat-card-header>
              <mat-card-content>
                <mat-list role="list">
                  @for (file of fileInfos | async; track file.name) {
                  <mat-list-item role="listitem">
                    <a href="{{ file.url }}">{{ file.name }}</a>
                  </mat-list-item>
                  }
                </mat-list>
              </mat-card-content>
            </mat-card> -->
          </div>
        </div>
        @if(!data.title.includes('Adicionar')){
          <div class="row d-flex align-items-center justify-content-center">
            <div class="col-lg-12">
              <mat-form-field class="example-full-width">
                <mat-label>#ID</mat-label>
                <input matInput placeholder="Ex. Identificador" [value]="data.id" class="fw-bold" formControlName="id" name="id" readonly="true">
              </mat-form-field>
            </div>
          </div>
            <div class="row d-flex align-items-center justify-content-center">
            <div class="col-lg-12">
              <mat-form-field class="example-full-width">
                <mat-label>Foto</mat-label>
                <input matInput placeholder="Ex. Nome do arquivo" [value]="data.foto" class="fw-bold" formControlName="foto" name="foto">
              </mat-form-field>
            </div>
          </div>
        }
        <div class="row d-flex align-items-center justify-content-center">
          <div class="col-lg-12">
            <mat-form-field class="example-full-width">
              <mat-label>Nome</mat-label>
              <input matInput placeholder="Ex. Nome da banda" [value]="data.nome" class="fw-bold" formControlName="nome" name="nome">
            </mat-form-field>
          </div>
        </div>
        <div class="row  d-flex align-items-center justify-content-center">
          <div class="col-lg-12">
            <mat-form-field class="example-full-width">
              <mat-label>Descrição</mat-label>
              <textarea placeholder="Ex. Descrição"
              matInput matTextareaAutosize matAutosizeMinRows=1
              matAutosizeMaxRows=5 [value]="bandaResponse.descricao" class="fw-bold" formControlName="descricao" name="descricao">
              </textarea>
            </mat-form-field>
          </div>
        </div>
      </div>
      <div mat-dialog-actions>
        <div class="row">
          <div class="col-6 d-flex">
            <div class="col-auto">
              <a (click)="ClosePopup()" mat-raised-button color="warn">Fechar</a>
            </div>
          </div>
          <div class="col-6 d-flex align-items-end justify-content-end">
            <div class="col-auto">
              <button type="submit" class="btn btn-success">Enviar</button>
            </div>
          </div>
        </div>
      </div>
      </form>
  </mat-card-content>
</mat-card>
